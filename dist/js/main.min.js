/*! BuildToolsCookbook v2.0.0 | (c) 2022 Pradow | MIT License | http://github.com/cferdinandi/build-tools-boilerplate */
!function(){"use strict";Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);const n=document.querySelector("#productInfoModal"),e=document.querySelector("#productInfo");function t(){n.classList.toggle("modal-open")}function i(n){const i=n.currentTarget,r=u.products.filter((n=>n.id===i.dataset.id));var a;a=r,e.innerHTML=`<div class="product-name">${a[0].product_name}</div>\n    <div class="product-ingredients">${a[0].ingredients_text||""}</div>\n    <div class="product-container">\n      <div class="product-image">\n        <img src="${a[0].image_url||""}" alt="${a[0].image_url?a[0].product_name:""}">\n      </div>\n      <div class="product-nutrients">\n        <div class="nutrient-container">\n          <div class="nutrient-name">kcal / 100g</div>\n          <div class="nutrient-amount">\n            ${a[0].nutriments["energy-kcal_100g"]||""}\n          </div>\n        </div>\n        <div class="nutrient-container">\n          <div class="nutrient-name">Carbohydrates / 100g</div>\n          <div class="nutrient-amount">${a[0].nutriments.carbohydrates_100g||""}</div>\n        </div>\n        <div class="nutrient-container">\n          <div class="nutrient-name">Fat / 100g</div>\n          <div class="nutrient-amount">${a[0].nutriments.fat_100g||""}</div>\n        </div>\n        <div class="nutrient-container">\n          <div class="nutrient-name">Protein / 100g</div>\n          <div class="nutrient-amount">${a[0].nutriments.proteins_100g||""}</div>\n        </div>\n        <div class="nutrient-container">\n          <div class="nutrient-name">Fiber / 100g</div>\n          <div class="nutrient-amount">${a[0].nutriments.fiber_100g||""}</div>\n        </div>\n        <div class="nutrient-container">\n          <div class="nutrient-name">Sodium / 100g</div>\n          <div class="nutrient-amount">${a[0].nutriments.sodium_100g||""}</div>\n        </div>\n        <div class="nutrient-container">\n          <div class="nutrient-name">Sugars / 100g</div>\n          <div class="nutrient-amount">${a[0].nutriments.sugars_100g||""}</div>\n        </div>\n      </div>\n    </div>`,t()}document.querySelector("#closeModal").addEventListener("click",t),document.querySelector("#searchResultsContainer");const r=document.querySelector("#paginationContainer"),a=document.querySelector("#pageSelector");function c(n){n.preventDefault();p(n,{page:n.currentTarget.value,searchedItem:l})}const s=document.querySelector("#searchFoodForm"),o=document.querySelector("#searchFoodInput"),d=document.querySelector("#searchResults");let u,l;let m=async(n,e)=>{u=await async function(n){const e=await fetch(n);return await e.json()}(n),console.log(u.products),e({currentPage:u.page})};function v(n){const e=[],t=document.createDocumentFragment();u.products.forEach((n=>{const t={name:n.product_name,id:n.id,image:n.image_url,ingredients:n.ingredients_text,nutrients:n.nutriments};e.push(t)})),e.forEach((n=>{t.append(function(n){const e=document.createElement("div");return e.innerText=n.name,e.setAttribute("data-id",n.id),e.classList.add("product-list-item"),e.addEventListener("click",i),e}(n))})),1===n.currentPage&&function(){a.innerHTML="";for(let n=1;n<=u.page_count;n++){let e=document.createElement("option");e.innerText=n,e.setAttribute("value",n),pageSelector.appendChild(e)}a.addEventListener("change",c),r.classList.remove("hide")}(),d.innerHTML="",d.append(t)}function p(n,e){n.preventDefault(),e||(l=o.value,o.value="");const t=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${e?e.searchedItem:l}&page=${e?e.page:"1"}&search_simple=1&action=process&json=1`;m(t,v)}s.addEventListener("submit",p)}();
