/*! BuildToolsCookbook v2.0.0 | (c) 2022 Pradow | MIT License | http://github.com/cferdinandi/build-tools-boilerplate */
!function(){"use strict";Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);const e=document.querySelector("#productInfoModal"),n=document.querySelector("#productInfo");function t(){e.classList.toggle("modal-open"),window.scrollTo(0,0)}function i(e){const i=e.currentTarget,r=m.products.filter((e=>e.id===i.dataset.id));var c;c=r,n.innerHTML=`<div class="product-name">${c[0].product_name}</div>\n    <div class="product-ingredients">${c[0].ingredients_text||""}</div>\n    <div class="product-container">\n      <div class="product-image">\n        <img src="${c[0].image_url||""}" alt="${c[0].image_url?c[0].product_name:""}">\n      </div>\n      <div class="product-nutrients">\n        <div class="nutrient-container">\n          <div class="nutrient-name">kcal / 100g</div>\n          <div class="nutrient-amount">\n            ${c[0].nutriments["energy-kcal_100g"]||""}\n          </div>\n        </div>\n        <div class="nutrient-container">\n          <div class="nutrient-name">Carbohydrates / 100g</div>\n          <div class="nutrient-amount">${c[0].nutriments.carbohydrates_100g||""}</div>\n        </div>\n        <div class="nutrient-container">\n          <div class="nutrient-name">Fat / 100g</div>\n          <div class="nutrient-amount">${c[0].nutriments.fat_100g||""}</div>\n        </div>\n        <div class="nutrient-container">\n          <div class="nutrient-name">Protein / 100g</div>\n          <div class="nutrient-amount">${c[0].nutriments.proteins_100g||""}</div>\n        </div>\n        <div class="nutrient-container">\n          <div class="nutrient-name">Fiber / 100g</div>\n          <div class="nutrient-amount">${c[0].nutriments.fiber_100g||""}</div>\n        </div>\n        <div class="nutrient-container">\n          <div class="nutrient-name">Sodium / 100g</div>\n          <div class="nutrient-amount">${c[0].nutriments.sodium_100g||""}</div>\n        </div>\n        <div class="nutrient-container">\n          <div class="nutrient-name">Sugars / 100g</div>\n          <div class="nutrient-amount">${c[0].nutriments.sugars_100g||""}</div>\n        </div>\n      </div>\n    </div>`,t()}document.querySelector("#closeModal").addEventListener("click",t),document.querySelector("#searchResultsContainer");const r=document.querySelector("#paginationContainer"),c=document.querySelector("#pageSelector");function a(e){e.preventDefault();h(e,{page:e.currentTarget.value,searchedItem:v})}const s=document.querySelector("#loader");function o(){s.classList.toggle("hide")}const d=document.querySelector("#searchFoodForm"),u=document.querySelector("#searchFoodInput"),l=document.querySelector("#searchResults");let m,v;let g=async(e,n)=>{m=await async function(e){const n=await fetch(e);return await n.json()}(e),console.log(m.products),n({currentPage:m.page})};function p(e){const n=[],t=document.createDocumentFragment();m.products.forEach((e=>{const t={name:e.product_name,id:e.id,image:e.image_url,ingredients:e.ingredients_text,nutrients:e.nutriments};n.push(t)})),n.forEach((e=>{t.append(function(e){const n=document.createElement("div");return n.innerText=e.name,n.setAttribute("data-id",e.id),n.classList.add("product-list-item"),n.addEventListener("click",i),n}(e))})),1===e.currentPage&&function(){c.innerHTML="";for(let e=1;e<=m.page_count;e++){let n=document.createElement("option");n.innerText=e,n.setAttribute("value",e),pageSelector.appendChild(n)}c.addEventListener("change",a),r.classList.remove("hide")}(),l.innerHTML="",l.append(t),o()}function h(e,n){e.preventDefault(),o(),n||(v=u.value,u.value="");const t=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${n?n.searchedItem:v}&page=${n?n.page:"1"}&search_simple=1&action=process&json=1`;g(t,p)}d.addEventListener("submit",h)}();
