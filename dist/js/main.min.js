/*! BuildToolsCookbook v2.0.0 | (c) 2022 Pradow | MIT License | http://github.com/cferdinandi/build-tools-boilerplate */
!function(){"use strict";Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);const e=document.querySelector("#productInfoModal"),n=document.querySelector("#productInfo");function t(){e.classList.toggle("modal-open"),window.scrollTo(0,0)}function i(e){const i=e.currentTarget,r=v.products.filter((e=>e.id===i.dataset.id));var s;s=r,n.innerHTML=`<div class="product-name">${s[0].product_name}</div>\n    <div class="product-ingredients">${s[0].ingredients_text||""}</div>\n    <div class="product-container">\n      <div class="product-image">\n        <img src="${s[0].image_url||""}" alt="${s[0].image_url?s[0].product_name:""}">\n      </div>\n      <div class="product-nutrients">\n        <div class="nutrient-container">\n          <div class="nutrient-name">kcal / 100g</div>\n          <div class="nutrient-amount">\n            ${s[0].nutriments["energy-kcal_100g"]||""}\n          </div>\n        </div>\n        <div class="nutrient-container">\n          <div class="nutrient-name">Carbohydrates / 100g</div>\n          <div class="nutrient-amount">${s[0].nutriments.carbohydrates_100g||""}</div>\n        </div>\n        <div class="nutrient-container">\n          <div class="nutrient-name">Fat / 100g</div>\n          <div class="nutrient-amount">${s[0].nutriments.fat_100g||""}</div>\n        </div>\n        <div class="nutrient-container">\n          <div class="nutrient-name">Protein / 100g</div>\n          <div class="nutrient-amount">${s[0].nutriments.proteins_100g||""}</div>\n        </div>\n        <div class="nutrient-container">\n          <div class="nutrient-name">Fiber / 100g</div>\n          <div class="nutrient-amount">${s[0].nutriments.fiber_100g||""}</div>\n        </div>\n        <div class="nutrient-container">\n          <div class="nutrient-name">Sodium / 100g</div>\n          <div class="nutrient-amount">${s[0].nutriments.sodium_100g||""}</div>\n        </div>\n        <div class="nutrient-container">\n          <div class="nutrient-name">Sugars / 100g</div>\n          <div class="nutrient-amount">${s[0].nutriments.sugars_100g||""}</div>\n        </div>\n      </div>\n    </div>`,t()}document.querySelector("#closeModal").addEventListener("click",t),document.querySelector("#searchResultsContainer");const r=document.querySelector("#paginationContainer"),s=document.querySelector("#pageSelector");function a(e){e.preventDefault();y(e,{page:e.currentTarget.value,searchedItem:p})}const c=document.querySelector("#loader");function o(){c.classList.toggle("hide")}const d=document.querySelector("#searchFoodForm"),u=document.querySelector("#searchFoodInput"),l=document.querySelector("#searchResults"),m=document.querySelector("#searchTerm");let v,p;let g=async(e,n)=>{v=await async function(e){const n=await fetch(e);return await n.json()}(e),console.log(v.products),n({currentPage:v.page})};function h(e){Array.prototype.forEach.call(d.elements,(n=>{n.disabled=e}))}function f(e){const n=[],t=document.createDocumentFragment();v.products.forEach((e=>{const t={name:e.product_name,id:e.id,image:e.image_url,ingredients:e.ingredients_text,nutrients:e.nutriments};n.push(t)})),n.forEach((e=>{t.append(function(e){const n=document.createElement("div");return n.innerText=e.name,n.setAttribute("data-id",e.id),n.classList.add("product-list-item"),n.addEventListener("click",i),n}(e))})),1===e.currentPage&&function(){s.innerHTML="";for(let e=1;e<=v.page_count;e++){let n=document.createElement("option");n.innerText=e,n.setAttribute("value",e),pageSelector.appendChild(n)}s.addEventListener("change",a),r.classList.remove("hide")}(),l.innerHTML="",l.append(t),o(),u.value="",h(!1)}function y(e,n){e.preventDefault(),o(),h(!0),n||(p=u.value,m.innerHTML=`Results for <span class="searched-term">${p}</span>`,m.classList.remove("hide"));const t=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${n?n.searchedItem:p}&page=${n?n.page:"1"}&search_simple=1&action=process&json=1`;g(t,f)}d.addEventListener("submit",y)}();
